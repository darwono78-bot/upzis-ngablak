<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laporan Keuangan KOIN NU</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 40px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; text-align: center; }
        .text-right { text-align: right; }
        .footer-total { background-color: #e9ecef; font-weight: bold; }
    </style>
</head>
<body>

    <h1>Laporan Keuangan KOIN NU</h1>
    
    <h2>MODUL 1: Rincian Penerimaan Koin NU (Contoh Bulan Januari)</h2>
    <table id="tabel-modul-1">
        <thead>
            <tr>
                <th>NO</th>
                <th>TGL</th>
                <th>NAMA</th>
                <th>ALAMAT</th>
                <th>NOMINAL</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>1</td><td>01/01</td><td>Donatur A</td><td>Ranting 1</td><td class="text-right">4.000.000</td></tr>
            <tr><td>2</td><td>10/01</td><td>Donatur B</td><td>Ranting 2</td><td class="text-right">3.000.000</td></tr>
            <tr><td>3</td><td>20/01</td><td>Donatur C</td><td>Ranting 3</td><td class="text-right">5.000.000</td></tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4" class="footer-total text-right">TOTAL PENJUMLAHAN</td>
                <td id="m1-total-nominal" class="footer-total text-right">0</td>
            </tr>
        </tfoot>
    </table>

    <hr>

    <h2>MODUL 2: TAMPILAN JURNAL UMUM (Bulan Januari)</h2>
    <p>Dana Masuk Koin di Jurnal Umum adalah Hak Ranting (60%) dari Total Koin.</p>
    <table id="tabel-modul-2">
        <thead>
            <tr>
                <th>NO</th>
                <th>TANGGAL</th>
                <th>URAIAN</th>
                <th>DANA MASUK (DEBIT)</th>
                <th>DANA KELUAR (KREDIT)</th>
                <th>SALDO</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>01/01</td>
                <td>Saldo Bulan Lalu</td>
                <td class="text-right">0</td>
                <td class="text-right">0</td>
                <td id="m2-saldo-awal" class="text-right">0</td>
            </tr>
            <tr>
                <td>2</td>
                <td>31/01</td>
                <td>Penerimaan Dana KOIN NU (Hak Ranting 60%)</td>
                <td id="m2-dana-masuk-koin" class="text-right">0</td>
                <td class="text-right">0</td>
                <td id="m2-saldo-ranting" class="text-right">0</td>
            </tr>
            <tr>
                <td>3</td>
                <td>31/01</td>
                <td>Pembagian Honor Petugas (10%)</td>
                <td class="text-right">0</td>
                <td id="m2-dana-keluar-petugas" class="text-right">0</td>
                <td id="m2-saldo-petugas" class="text-right">0</td>
            </tr>
            <tr>
                <td>4</td>
                <td>31/01</td>
                <td>Pembagian Honor MWC (25%)</td>
                <td class="text-right">0</td>
                <td id="m2-dana-keluar-mwc" class="text-right">0</td>
                <td id="m2-saldo-mwc" class="text-right">0</td>
            </tr>
            <tr>
                <td>5</td>
                <td>31/01</td>
                <td>Pembagian Honor PC (5%)</td>
                <td class="text-right">0</td>
                <td id="m2-dana-keluar-pc" class="text-right">0</td>
                <td id="m2-saldo-pc" class="text-right">0</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3" class="footer-total text-right">TOTAL</td>
                <td id="m2-total-masuk" class="footer-total text-right">0</td>
                <td id="m2-total-keluar" class="footer-total text-right">0</td>
                <td id="m2-saldo-akhir" class="footer-total text-right">0</td>
            </tr>
        </tfoot>
    </table>

    <hr>

    <h2>MODUL 3: TAMPILAN LAPORAN TAHUNAN</h2>
    <p>Kolom (3) Total Penerimaan Koin diisi dengan total penuh (100%).</p>
    <table id="tabel-modul-3">
        <thead>
            <tr>
                <th rowspan="2">NO</th>
                <th rowspan="2">BULAN</th>
                <th colspan="2">PENERIMAAN</th>
                <th colspan="5">PENGELUARAN</th>
                <th rowspan="2">SALDO AKHIR BULAN INI (8)</th>
                <th rowspan="2">SALDO KAS TAHUN BERJALAN (9)</th>
            </tr>
            <tr>
                <th>JUMLAH DONATUR (2)</th>
                <th>TOTAL PENERIMAAN KOIN (3)</th>
                <th>PENDIDIKAN UANG (4)</th>
                <th>KESEHATAN UANG (5)</th>
                <th>EKONOMI UANG (6)</th>
                <th>SOSIAL & LAIN-LAIN (7)</th>
                <th>JUMLAH PENGELUARAN (7)</th>
            </tr>
        </thead>
        <tbody>
            <tr id="data-januari">
                <td>1</td>
                <td>JANUARI</td>
                <td class="text-right" id="m3-jan-donatur">200</td>
                <td class="text-right" id="m3-jan-penerimaan">0</td>
                <td class="text-right" id="m3-jan-pendidikan">0</td>
                <td class="text-right" id="m3-jan-kesehatan">0</td>
                <td class="text-right" id="m3-jan-ekonomi">0</td>
                <td class="text-right" id="m3-jan-sosial">0</td>
                <td class="text-right" id="m3-jan-jml-pengeluaran">0</td>
                <td class="text-right" id="m3-jan-saldo-akhir">0</td>
                <td class="text-right" id="m3-jan-saldo-kas">0</td>
            </tr>
            </tbody>
        <tfoot>
            <tr>
                <td colspan="3" class="footer-total text-right">TOTAL TAHUNAN</td>
                <td class="footer-total text-right" id="m3-total-penerimaan">0</td>
                <td class="footer-total text-right">0</td>
                <td class="footer-total text-right">0</td>
                <td class="footer-total text-right">0</td>
                <td class="footer-total text-right">0</td>
                <td class="footer-total text-right" id="m3-total-pengeluaran">0</td>
                <td class="footer-total text-right" id="m3-footer-saldo-akhir">0</td>
                <td class="footer-total text-right" id="m3-footer-saldo-kas">0</td>
            </tr>
        </tfoot>
    </table>

    <script>
        // --- DATA SUMBER (Source of Truth) ---
        // Total Koin yang terkumpul pada bulan Januari (Sesuai total di Modul 1)
        const TOTAL_KOIN_BULANAN = 12000000; 

        // Distribusi Persentase KOIN NU
        const HAK_RANTING = TOTAL_KOIN_BULANAN * 0.60; 
        const HONOR_PETUGAS = TOTAL_KOIN_BULANAN * 0.10;
        const HONOR_MWC = TOTAL_KOIN_BULANAN * 0.25;    
        const HONOR_PC = TOTAL_KOIN_BULANAN * 0.05;     
        const TOTAL_HONOR_WAJIB = HONOR_PETUGAS + HONOR_MWC + HONOR_PC; // 4.800.000

        // Asumsi Data Pengeluaran Non-Honor (Untuk Laporan Tahunan)
        const PENGELUARAN_PENDIDIKAN = 0;
        const PENGELUARAN_KESEHATAN = 100000;
        const PENGELUARAN_EKONOMI = 500000;
        
        // --- HELPER FUNCTION ---
        const formatNominal = (angka) => {
            // Pastikan input adalah angka, jika tidak, kembalikan 0
            if (typeof angka !== 'number' || isNaN(angka)) return '0';
            return angka.toLocaleString('id-ID', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
        };

        // --- FUNGSI UTAMA SINKRONISASI ---
        function initializeLaporan() {
            let saldoAwalJanuari = 0;
            let saldoAkhirJanuari = 0;
            let saldoKasTahunBerjalan = saldoAwalJanuari; // Saldo kas dimulai dari saldo awal

            // =======================================
            // 1. SINKRONISASI MODUL 1 (SUMBER DATA)
            // =======================================
            document.getElementById('m1-total-nominal').textContent = formatNominal(TOTAL_KOIN_BULANAN);

            // =======================================
            // 2. SINKRONISASI MODUL 2 (JURNAL UMUM)
            // =======================================
            
            // Inisialisasi saldo Jurnal Umum
            let saldoJurnalUmum = saldoAwalJanuari;
            let totalMasukJurnal = 0;
            let totalKeluarJurnal = 0;

            // Baris 1: Saldo Awal
            document.getElementById('m2-saldo-awal').textContent = formatNominal(saldoJurnalUmum);

            // Baris 2: Penerimaan Dana KOIN NU (Hak Ranting 60% = 7.200.000)
            saldoJurnalUmum += HAK_RANTING;
            totalMasukJurnal += HAK_RANTING;
            document.getElementById('m2-dana-masuk-koin').textContent = formatNominal(HAK_RANTING);
            document.getElementById('m2-saldo-ranting').textContent = formatNominal(saldoJurnalUmum);

            // Baris 3: Pembagian Honor Petugas (10% = 1.200.000)
            saldoJurnalUmum -= HONOR_PETUGAS;
            totalKeluarJurnal += HONOR_PETUGAS;
            document.getElementById('m2-dana-keluar-petugas').textContent = formatNominal(HONOR_PETUGAS);
            document.getElementById('m2-saldo-petugas').textContent = formatNominal(saldoJurnalUmum);

            // Baris 4: Pembagian Honor MWC (25% = 3.000.000)
            saldoJurnalUmum -= HONOR_MWC;
            totalKeluarJurnal += HONOR_MWC;
            document.getElementById('m2-dana-keluar-mwc').textContent = formatNominal(HONOR_MWC);
            document.getElementById('m2-saldo-mwc').textContent = formatNominal(saldoJurnalUmum);

            // Baris 5: Pembagian Honor PC (5% = 600.000)
            saldoJurnalUmum -= HONOR_PC;
            totalKeluarJurnal += HONOR_PC;
            document.getElementById('m2-dana-keluar-pc').textContent = formatNominal(HONOR_PC);
            document.getElementById('m2-saldo-pc').textContent = formatNominal(saldoJurnalUmum);

            // FOOTER MODUL 2
            document.getElementById('m2-total-masuk').textContent = formatNominal(totalMasukJurnal);
            document.getElementById('m2-total-keluar').textContent = formatNominal(totalKeluarJurnal);
            document.getElementById('m2-saldo-akhir').textContent = formatNominal(saldoJurnalUmum);
            
            // =======================================
            // 3. SINKRONISASI MODUL 3 (LAPORAN TAHUNAN)
            // =======================================

            // Total Pengeluaran Bulan Januari (Honor + Non-Honor)
            const jumlahPengeluaranJan = TOTAL_HONOR_WAJIB + PENGELUARAN_KESEHATAN + PENGELUARAN_EKONOMI;
            
            // Perhitungan Saldo Akhir Bulan (8)
            saldoAkhirJanuari = TOTAL_KOIN_BULANAN - jumlahPengeluaranJan;
            
            // Perhitungan Saldo Kas Tahun Berjalan (9)
            saldoKasTahunBerjalan = saldoAkhirJanuari; // Karena ini bulan pertama

            // ISI DATA BULAN JANUARI
            document.getElementById('m3-jan-penerimaan').textContent = formatNominal(TOTAL_KOIN_BULANAN);
            document.getElementById('m3-jan-pendidikan').textContent = formatNominal(PENGELUARAN_PENDIDIKAN);
            document.getElementById('m3-jan-kesehatan').textContent = formatNominal(PENGELUARAN_KESEHATAN);
            document.getElementById('m3-jan-ekonomi').textContent = formatNominal(PENGELUARAN_EKONOMI);
            // Honor wajib (4.800.000) + Non-Honor (600.000) = 5.400.000
            document.getElementById('m3-jan-sosial').textContent = formatNominal(TOTAL_HONOR_WAJIB);
            document.getElementById('m3-jan-jml-pengeluaran').textContent = formatNominal(jumlahPengeluaranJan); 
            document.getElementById('m3-jan-saldo-akhir').textContent = formatNominal(saldoAkhirJanuari);
            document.getElementById('m3-jan-saldo-kas').textContent = formatNominal(saldoKasTahunBerjalan);

            // FOOTER MODUL 3 (TOTAL TAHUNAN)
            document.getElementById('m3-total-penerimaan').textContent = formatNominal(TOTAL_KOIN_BULANAN);
            document.getElementById('m3-total-pengeluaran').textContent = formatNominal(jumlahPengeluaranJan);
            
            // *PERBAIKAN YANG ANDA MINTA*
            // Kolom (8) dan (9) harus menampilkan saldo akhir (yaitu data bulan terakhir)
            document.getElementById('m3-footer-saldo-akhir').textContent = formatNominal(saldoAkhirJanuari);
            document.getElementById('m3-footer-saldo-kas').textContent = formatNominal(saldoKasTahunBerjalan);
        }

        // Jalankan fungsi setelah dokumen dimuat
        document.addEventListener('DOMContentLoaded', initializeLaporan);
    </script>

</body>
</html>
